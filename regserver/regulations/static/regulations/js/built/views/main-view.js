define("main-view",["jquery","underscore","backbone","dispatch","search-results-view","reg-view","reg-model","search-model","sub-head-view"],function(e,t,n,r,i,s,o,u,a){var f=n.View.extend({el:"#content-body",initialize:function(){this.header=new a,r.on("mainContent:change",this.render,this),r.on("regSection:open",this.loadContent,this),r.on("search:submitted",this.assembleSearchURL,this),r.on("loading:start",this.loading,this),r.on("loading:finish",this.loaded,this)},modelmap:{regSection:o,searchResults:u},viewmap:{regSection:s,searchResults:i},assembleSearchURL:function(e,t){var n=r.getRegId();n+="?q="+e.query,n+="&version="+e.version,typeof e.page!="undefined"&&(n+="&page="+e.page),e.url=n,this.loadContent(n,e,t)},loadContent:function(e,t,n){r.trigger("loading:start");var i=this.modelmap[n].get(e);typeof i.done!="undefined"?i.done(function(e){this.createView(e,t,n)}.bind(this)):this.createView(i,t,n)},createView:function(t,n,i){var s=e(n.scrollToId).offset().top||0;r.removeContentView(),this.render(t,s),r.setContentView(new this.viewmap[i](n)),r.trigger("loading:finish")},render:function(e,t){this.header.reset(),this.$el.html(e),window.scrollTo(0,t)},loading:function(){e(".main-content").addClass("loading")},loaded:function(){e(".main-content").removeClass("loading")}});return f});